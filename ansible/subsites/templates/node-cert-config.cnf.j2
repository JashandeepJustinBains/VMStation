[req]
distinguished_name = req_distinguished_name
req_extensions = v3_req
prompt = no

[req_distinguished_name]
CN = {{ ansible_fqdn | default('vmstation.local') }}
O = VMStation
C = US

[v3_req]
keyUsage = keyEncipherment, dataEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[alt_names]
DNS.1 = {{ ansible_fqdn | default('vmstation.local') }}
DNS.2 = *.{{ ansible_domain | default('vmstation.local') }}
DNS.3 = localhost
{% for ip in node_ips %}
IP.{{ loop.index }} = {{ ip }}
{% endfor %}
IP.{{ node_ips | length + 1 }} = 127.0.0.1