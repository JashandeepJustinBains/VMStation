global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'node_exporters'
    static_configs:
      - targets:
{% for h in groups['monitoring_nodes'] | default([]) %}
        - '{{ h }}:9100'
{% endfor %}
{% for h in groups['storage_nodes'] | default([]) %}
        - '{{ h }}:9100'
{% endfor %}
{% for h in groups['compute_nodes'] | default([]) %}
        - '{{ h }}:9100'
{% endfor %}

  - job_name: 'podman_system_metrics'
    static_configs:
      - targets:
{% if enable_podman_exporters | default(false) %}
{% for h in groups['monitoring_nodes'] | default([]) %}
        - '{{ h }}:9882'
{% endfor %}
{% for h in groups['storage_nodes'] | default([]) %}
        - '{{ h }}:9882'
{% endfor %}
{% for h in groups['compute_nodes'] | default([]) %}
        - '{{ h }}:9882'
{% endfor %}
{% endif %}

  - job_name: 'podman_exporter'
    static_configs:
      - targets:
{% if enable_podman_exporters | default(false) %}
{% for h in groups['monitoring_nodes'] | default([]) %}
        - '{{ h }}:9300'
{% endfor %}
{% for h in groups['storage_nodes'] | default([]) %}
        - '{{ h }}:9300'
{% endfor %}
{% for h in groups['compute_nodes'] | default([]) %}
        - '{{ h }}:9300'
{% endfor %}
{% endif %}

# Add more scrape configs as needed
