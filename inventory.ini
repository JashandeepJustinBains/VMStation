# VMStation Kubespray Inventory
# Kubespray-compatible inventory for VMStation cluster

# Control plane nodes
[kube-master]
masternode ansible_host=192.168.4.63 ansible_user=root ansible_connection=local

# Worker nodes
[kube-node]
storagenodet3500 ansible_host=192.168.4.61 ansible_user=root ansible_ssh_private_key_file=~/.ssh/id_k3s
homelab ansible_host=192.168.4.62 ansible_user=jashandeepjustinbains ansible_ssh_private_key_file=~/.ssh/id_k3s

# etcd cluster
[etcd]
masternode ansible_host=192.168.4.63 ansible_user=root ansible_connection=local

# Legacy groups for backward compatibility with existing scripts
[monitoring_nodes]
masternode ansible_host=192.168.4.63 ansible_user=root ansible_connection=local

[storage_nodes]
storagenodet3500 ansible_host=192.168.4.61 ansible_user=root ansible_ssh_private_key_file=~/.ssh/id_k3s

[compute_nodes]
homelab ansible_host=192.168.4.62 ansible_user=jashandeepjustinbains ansible_ssh_private_key_file=~/.ssh/id_k3s

# Kubespray cluster group
[k8s-cluster:children]
kube-master
kube-node

# VMStation legacy groups
[all:children]
monitoring_nodes
storage_nodes
compute_nodes

# Global variables
[all:vars]
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# Kubernetes configuration
kubernetes_version=1.29
pod_network_cidr=10.244.0.0/16
service_network_cidr=10.96.0.0/12

# Container runtime
container_runtime=containerd
cri_socket=unix:///var/run/containerd/containerd.sock

# Cluster endpoint
control_plane_endpoint=192.168.4.63:6443

# CNI configuration
cni_plugin=flannel

# System configuration
disable_swap=true
setup_firewall=false

# Node-specific variables
[monitoring_nodes:vars]
schedule_monitoring_pods=true
install_monitoring_stack=true
wol_mac=00:e0:4c:68:cb:bf
node_role=control-plane

[storage_nodes:vars]
schedule_jellyfin=true
media_storage_path=/srv/media
jellyfin_config_path=/var/lib/jellyfin
wol_mac=b8:ac:6f:7e:6c:9d
node_role=worker

[compute_nodes:vars]
schedule_general_workloads=true
rhel_subscription_required=false
wol_mac=d0:94:66:30:d6:63
node_role=worker
os_family=RedHat
os_version=10
ansible_become=true
ansible_become_method=sudo
# NOTE: homelab host now uses NOPASSWD sudo - no ansible_become_pass required
