1.
root@masternode:/srv/monitoring_data/VMStation# ls -l /etc/kubernetes/admin.conf && kubectl --kubeconfig=/etc/kubernetes/admin.conf version -short
-rw------- 1 root root 5652 Sep 13 12:39 /etc/kubernetes/admin.conf
Client Version: v1.34.0
Kustomize Version: v5.7.1
Unable to connect to the server: dial tcp: lookup hort on 10.96.0.10:53: no such host
root@masternode:/srv/monitoring_data/VMStation# ls -l /etc/kubernetes/admin.conf && kubectl --kubeconfig=/etc/kubernetes/admin.conf version --client
-rw------- 1 root root 5652 Sep 13 12:39 /etc/kubernetes/admin.conf
Client Version: v1.34.0
Kustomize Version: v5.7.1

2.
root@masternode:/srv/monitoring_data/VMStation# KUBECONF=/etc/kubernetes/admin.conf; server=$(kubectl --kubeconfig=$KUBECONF config view -o jsonpath='{.clusters[0].cluster.server}'); echo "server=$server"; timeout 5 bash -c "echo > /dev/tcp/$(echo $server | sed -E 's#https?://##; s#:[0-9]+##')/$(echo $server | sed -E 's#.*:([0-9]+)$#\1#') 2>/dev/null" && echo "TCP_OPEN" || echo "TCP_CLOSED"
server=https://192.168.4.63:6443
TCP_OPEN

3.
root@masternode:/srv/monitoring_data/VMStation# kubectl --kubeconfig=/etc/kubernetes/admin.conf cluster-info >/dev/null && echo "kubectl->cluster:OK" || echo "kubectl->cluster:FAIL"; kubectl --kubeconfig=/etc/kubernetes/admin.conf get --raw /healthz || true
kubectl->cluster:OK

4.
root@masternode:/srv/monitoring_data/VMStation# kubectl -n kube-system get pods -o wide | egrep 'kube-apiserver|kube-controller-manager' || kubectl -n kube-system get pods -o wide
kube-apiserver-masternode            1/1     Running            15 (61m ago)     64m   192.168.4.63   masternode         <none>           <none>
kube-controller-manager-masternode   1/1     Running            36 (61m ago)     64m   192.168.4.63   masternode         <none>           <none>

5.
root@masternode:/srv/monitoring_data/VMStation# # show kube-apiserver container logs from container runtime (works if containerd/crictl available)
sudo crictl ps -a | egrep 'kube-apiserver' && sudo crictl logs $(sudo crictl ps -a | awk '/kube-apiserver/{print $1; exit}')
# fallback: kubelet journal lines
sudo journalctl -u kubelet -n 200 --no-pager | egrep 'kube-apiserver|static pod' -n
0a8f9cb27bdb2       f44c6888a2d24       About an hour ago   Running             kube-apiserver            15                  964a3c85e20a8       kube-apiserver-masternode
425ec857d3dff       f44c6888a2d24       About an hour ago   Exited              kube-apiserver            14                  964a3c85e20a8       kube-apiserver-masternode
I0913 16:42:57.210004       1 options.go:222] external host was not specified, using 192.168.4.63
I0913 16:42:57.212434       1 server.go:148] Version: v1.29.15
I0913 16:42:57.212479       1 server.go:150] "Golang settings" GOGC="" GOMAXPROCS="" GOTRACEBACK=""
I0913 16:42:57.594792       1 shared_informer.go:311] Waiting for caches to sync for node_authorizer
I0913 16:42:57.602016       1 plugins.go:157] Loaded 12 mutating admission controller(s) successfully in the following order: NamespaceLifecycle,LimitRanger,ServiceAccount,NodeRestriction,TaintNodesByCondition,Priority,DefaultTolerationSeconds,DefaultStorageClass,StorageObjectInUseProtection,RuntimeClass,DefaultIngressClass,MutatingAdmissionWebhook.
I0913 16:42:57.602129       1 plugins.go:160] Loaded 13 validating admission controller(s) successfully in the following order: LimitRanger,ServiceAccount,PodSecurity,Priority,PersistentVolumeClaimResize,RuntimeClass,CertificateApproval,CertificateSigning,ClusterTrustBundleAttest,CertificateSubjectRestriction,ValidatingAdmissionPolicy,ValidatingAdmissionWebhook,ResourceQuota.
I0913 16:42:57.602652       1 instance.go:297] Using reconciler: lease
I0913 16:42:57.650727       1 handler.go:275] Adding GroupVersion apiextensions.k8s.io v1 to ResourceManager
W0913 16:42:57.650955       1 genericapiserver.go:742] Skipping API apiextensions.k8s.io/v1beta1 because it has no resources.
I0913 16:42:57.949972       1 handler.go:275] Adding GroupVersion  v1 to ResourceManager
I0913 16:42:57.950439       1 instance.go:693] API group "internal.apiserver.k8s.io" is not enabled, skipping.
I0913 16:42:58.255547       1 instance.go:693] API group "resource.k8s.io" is not enabled, skipping.
I0913 16:42:58.274917       1 handler.go:275] Adding GroupVersion authentication.k8s.io v1 to ResourceManager
W0913 16:42:58.274940       1 genericapiserver.go:742] Skipping API authentication.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.274950       1 genericapiserver.go:742] Skipping API authentication.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.275368       1 handler.go:275] Adding GroupVersion authorization.k8s.io v1 to ResourceManager
W0913 16:42:58.275381       1 genericapiserver.go:742] Skipping API authorization.k8s.io/v1beta1 because it has no resources.
I0913 16:42:58.276116       1 handler.go:275] Adding GroupVersion autoscaling v2 to ResourceManager
I0913 16:42:58.276788       1 handler.go:275] Adding GroupVersion autoscaling v1 to ResourceManager
W0913 16:42:58.276801       1 genericapiserver.go:742] Skipping API autoscaling/v2beta1 because it has no resources.
W0913 16:42:58.276811       1 genericapiserver.go:742] Skipping API autoscaling/v2beta2 because it has no resources.
I0913 16:42:58.277980       1 handler.go:275] Adding GroupVersion batch v1 to ResourceManager
W0913 16:42:58.277994       1 genericapiserver.go:742] Skipping API batch/v1beta1 because it has no resources.
I0913 16:42:58.278715       1 handler.go:275] Adding GroupVersion certificates.k8s.io v1 to ResourceManager
W0913 16:42:58.278727       1 genericapiserver.go:742] Skipping API certificates.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.278734       1 genericapiserver.go:742] Skipping API certificates.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.279172       1 handler.go:275] Adding GroupVersion coordination.k8s.io v1 to ResourceManager
W0913 16:42:58.279183       1 genericapiserver.go:742] Skipping API coordination.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.279247       1 genericapiserver.go:742] Skipping API discovery.k8s.io/v1beta1 because it has no resources.
I0913 16:42:58.279784       1 handler.go:275] Adding GroupVersion discovery.k8s.io v1 to ResourceManager
I0913 16:42:58.281145       1 handler.go:275] Adding GroupVersion networking.k8s.io v1 to ResourceManager
W0913 16:42:58.281158       1 genericapiserver.go:742] Skipping API networking.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.281166       1 genericapiserver.go:742] Skipping API networking.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.281525       1 handler.go:275] Adding GroupVersion node.k8s.io v1 to ResourceManager
W0913 16:42:58.281536       1 genericapiserver.go:742] Skipping API node.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.281543       1 genericapiserver.go:742] Skipping API node.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.282250       1 handler.go:275] Adding GroupVersion policy v1 to ResourceManager
W0913 16:42:58.282263       1 genericapiserver.go:742] Skipping API policy/v1beta1 because it has no resources.
I0913 16:42:58.283673       1 handler.go:275] Adding GroupVersion rbac.authorization.k8s.io v1 to ResourceManager
W0913 16:42:58.283686       1 genericapiserver.go:742] Skipping API rbac.authorization.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.283694       1 genericapiserver.go:742] Skipping API rbac.authorization.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.284093       1 handler.go:275] Adding GroupVersion scheduling.k8s.io v1 to ResourceManager
W0913 16:42:58.284108       1 genericapiserver.go:742] Skipping API scheduling.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.284127       1 genericapiserver.go:742] Skipping API scheduling.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.285825       1 handler.go:275] Adding GroupVersion storage.k8s.io v1 to ResourceManager
W0913 16:42:58.285838       1 genericapiserver.go:742] Skipping API storage.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.285845       1 genericapiserver.go:742] Skipping API storage.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.286781       1 handler.go:275] Adding GroupVersion flowcontrol.apiserver.k8s.io v1beta3 to ResourceManager
I0913 16:42:58.287793       1 handler.go:275] Adding GroupVersion flowcontrol.apiserver.k8s.io v1 to ResourceManager
W0913 16:42:58.287805       1 genericapiserver.go:742] Skipping API flowcontrol.apiserver.k8s.io/v1beta2 because it has no resources.
W0913 16:42:58.287813       1 genericapiserver.go:742] Skipping API flowcontrol.apiserver.k8s.io/v1beta1 because it has no resources.
I0913 16:42:58.291487       1 handler.go:275] Adding GroupVersion apps v1 to ResourceManager
W0913 16:42:58.291505       1 genericapiserver.go:742] Skipping API apps/v1beta2 because it has no resources.
W0913 16:42:58.291515       1 genericapiserver.go:742] Skipping API apps/v1beta1 because it has no resources.
I0913 16:42:58.292280       1 handler.go:275] Adding GroupVersion admissionregistration.k8s.io v1 to ResourceManager
W0913 16:42:58.292292       1 genericapiserver.go:742] Skipping API admissionregistration.k8s.io/v1beta1 because it has no resources.
W0913 16:42:58.292299       1 genericapiserver.go:742] Skipping API admissionregistration.k8s.io/v1alpha1 because it has no resources.
I0913 16:42:58.292827       1 handler.go:275] Adding GroupVersion events.k8s.io v1 to ResourceManager
W0913 16:42:58.292839       1 genericapiserver.go:742] Skipping API events.k8s.io/v1beta1 because it has no resources.
I0913 16:42:58.303873       1 handler.go:275] Adding GroupVersion apiregistration.k8s.io v1 to ResourceManager
W0913 16:42:58.303892       1 genericapiserver.go:742] Skipping API apiregistration.k8s.io/v1beta1 because it has no resources.
I0913 16:42:58.690903       1 dynamic_cafile_content.go:157] "Starting controller" name="request-header::/etc/kubernetes/pki/front-proxy-ca.crt"
I0913 16:42:58.690914       1 dynamic_cafile_content.go:157] "Starting controller" name="client-ca-bundle::/etc/kubernetes/pki/ca.crt"
I0913 16:42:58.691524       1 secure_serving.go:213] Serving securely on [::]:6443
I0913 16:42:58.691587       1 dynamic_serving_content.go:132] "Starting controller" name="serving-cert::/etc/kubernetes/pki/apiserver.crt::/etc/kubernetes/pki/apiserver.key"
I0913 16:42:58.706808       1 controller.go:80] Starting OpenAPI V3 AggregationController
I0913 16:42:58.706861       1 tlsconfig.go:240] "Starting DynamicServingCertificateController"
I0913 16:42:58.706978       1 controller.go:116] Starting legacy_token_tracking_controller
I0913 16:42:58.707002       1 shared_informer.go:311] Waiting for caches to sync for configmaps
I0913 16:42:58.707051       1 system_namespaces_controller.go:67] Starting system namespaces controller
I0913 16:42:58.707119       1 dynamic_serving_content.go:132] "Starting controller" name="aggregator-proxy-cert::/etc/kubernetes/pki/front-proxy-client.crt::/etc/kubernetes/pki/front-proxy-client.key"
I0913 16:42:58.708547       1 controller.go:78] Starting OpenAPI AggregationController
I0913 16:42:58.709007       1 aggregator.go:163] waiting for initial CRD sync...
I0913 16:42:58.709030       1 apf_controller.go:374] Starting API Priority and Fairness config controller
I0913 16:42:58.709204       1 apiservice_controller.go:97] Starting APIServiceRegistrationController
I0913 16:42:58.712569       1 cache.go:32] Waiting for caches to sync for APIServiceRegistrationController controller
I0913 16:42:58.709232       1 handler_discovery.go:412] Starting ResourceDiscoveryManager
I0913 16:42:58.709281       1 available_controller.go:423] Starting AvailableConditionController
I0913 16:42:58.709504       1 cluster_authentication_trust_controller.go:440] Starting cluster_authentication_trust_controller controller
I0913 16:42:58.709550       1 gc_controller.go:78] Starting apiserver lease garbage collector
I0913 16:42:58.708552       1 customresource_discovery_controller.go:289] Starting DiscoveryController
I0913 16:42:58.710440       1 controller.go:133] Starting OpenAPI controller
I0913 16:42:58.710468       1 controller.go:85] Starting OpenAPI V3 controller
I0913 16:42:58.710496       1 naming_controller.go:291] Starting NamingConditionController
I0913 16:42:58.710509       1 establishing_controller.go:76] Starting EstablishingController
I0913 16:42:58.710521       1 nonstructuralschema_controller.go:192] Starting NonStructuralSchemaConditionController
I0913 16:42:58.710547       1 apiapproval_controller.go:186] Starting KubernetesAPIApprovalPolicyConformantConditionController
I0913 16:42:58.710568       1 crd_finalizer.go:266] Starting CRDFinalizer
I0913 16:42:58.710639       1 dynamic_cafile_content.go:157] "Starting controller" name="client-ca-bundle::/etc/kubernetes/pki/ca.crt"
I0913 16:42:58.710657       1 dynamic_cafile_content.go:157] "Starting controller" name="request-header::/etc/kubernetes/pki/front-proxy-ca.crt"
I0913 16:42:58.714558       1 crdregistration_controller.go:111] Starting crd-autoregister controller
I0913 16:42:58.723725       1 shared_informer.go:311] Waiting for caches to sync for crd-autoregister
I0913 16:42:58.723748       1 cache.go:32] Waiting for caches to sync for AvailableConditionController controller
I0913 16:42:58.723762       1 shared_informer.go:311] Waiting for caches to sync for cluster_authentication_trust_controller
I0913 16:42:58.823888       1 shared_informer.go:318] Caches are synced for crd-autoregister
I0913 16:42:58.824008       1 aggregator.go:165] initial CRD sync complete...
I0913 16:42:58.824021       1 autoregister_controller.go:141] Starting autoregister controller
I0913 16:42:58.824031       1 cache.go:32] Waiting for caches to sync for autoregister controller
I0913 16:42:58.847180       1 shared_informer.go:318] Caches are synced for configmaps
I0913 16:42:58.847495       1 apf_controller.go:379] Running API Priority and Fairness config worker
I0913 16:42:58.847643       1 apf_controller.go:382] Running API Priority and Fairness periodic rebalancing process
I0913 16:42:58.847579       1 controller.go:624] quota admission added evaluator for: leases.coordination.k8s.io
I0913 16:42:58.895499       1 shared_informer.go:318] Caches are synced for node_authorizer
I0913 16:42:58.915164       1 cache.go:39] Caches are synced for APIServiceRegistrationController controller
I0913 16:42:58.923781       1 cache.go:39] Caches are synced for AvailableConditionController controller
I0913 16:42:58.923909       1 shared_informer.go:318] Caches are synced for cluster_authentication_trust_controller
I0913 16:42:58.924167       1 cache.go:39] Caches are synced for autoregister controller
I0913 16:42:59.719165       1 storage_scheduling.go:111] all system priority classes are created successfully or already exist.
W0913 16:43:00.018709       1 lease.go:265] Resetting endpoints for master service "kubernetes" to [192.168.4.63]
I0913 16:43:00.019950       1 controller.go:624] quota admission added evaluator for: endpoints
I0913 16:43:00.025416       1 controller.go:624] quota admission added evaluator for: endpointslices.discovery.k8s.io
I0913 17:00:52.361199       1 controller.go:624] quota admission added evaluator for: deployments.apps
I0913 17:19:39.736474       1 controller.go:624] quota admission added evaluator for: namespaces
I0913 17:19:39.742911       1 controller.go:624] quota admission added evaluator for: serviceaccounts
I0913 17:19:39.786924       1 controller.go:624] quota admission added evaluator for: daemonsets.apps
I0913 17:19:39.794926       1 controller.go:624] quota admission added evaluator for: controllerrevisions.apps
I0913 17:20:01.530079       1 controller.go:624] quota admission added evaluator for: replicasets.apps
I0913 17:20:01.547824       1 alloc.go:330] "allocated clusterIPs" service="monitoring/prometheus" clusterIPs={"IPv4":"10.101.42.218"}
I0913 17:20:02.517621       1 alloc.go:330] "allocated clusterIPs" service="monitoring/grafana" clusterIPs={"IPv4":"10.110.101.234"}
I0913 17:20:33.542886       1 alloc.go:330] "allocated clusterIPs" service="jellyfin/jellyfin-service" clusterIPs={"IPv4":"10.108.154.183"}
I0913 17:29:02.037505       1 alloc.go:330] "allocated clusterIPs" service="default/test-b-svc" clusterIPs={"IPv4":"10.109.174.85"}
I0913 17:40:10.972323       1 alloc.go:330] "allocated clusterIPs" service="jellyfin/jellyfin-service" clusterIPs={"IPv4":"10.96.106.235"}
4:Sep 13 12:40:07 masternode kubelet[1795473]: E0913 12:40:07.284788 1795473 kubelet.go:1929] "Failed creating a mirror pod for" err="pods \"kube-apiserver-masternode\" already exists" pod="kube-system/kube-apiserver-masternode"
7:Sep 13 12:40:07 masternode kubelet[1795473]: I0913 12:40:07.313668 1795473 pod_startup_latency_tracker.go:102] "Observed pod startup duration" pod="kube-system/kube-apiserver-masternode" podStartSLOduration=3.313635886 podStartE2EDuration="3.313635886s" podCreationTimestamp="2025-09-13 12:40:04 -0400 EDT" firstStartedPulling="0001-01-01 00:00:00 +0000 UTC" lastFinishedPulling="0001-01-01 00:00:00 +0000 UTC" observedRunningTime="2025-09-13 12:40:07.313056167 -0400 EDT m=+1.190596074" watchObservedRunningTime="2025-09-13 12:40:07.313635886 -0400 EDT m=+1.191175788"


6.
root@masternode:/srv/monitoring_data/VMStation# kubectl --kubeconfig=/etc/kubernetes/admin.conf config view -o jsonpath='{.clusters[0].cluster.server}'; host=$(kubectl --kubeconfig=/etc/kubernetes/admin.conf config view -o jsonpath='{.clusters[0].cluster.server}' | sed -E 's#https?://##; s#:[0-9]+##'); ping -c 2 $host || nslookup $host || echo "resolve-failed"
https://192.168.4.63:6443PING 192.168.4.63 (192.168.4.63) 56(84) bytes of data.
64 bytes from 192.168.4.63: icmp_seq=1 ttl=64 time=0.051 ms
64 bytes from 192.168.4.63: icmp_seq=2 ttl=64 time=0.054 ms

--- 192.168.4.63 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 0.051/0.052/0.054/0.001 ms
